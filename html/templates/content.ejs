<!DOCTYPE html>
<html lang="en">
    <head>
        <title><%= element.name %></title>
        <% include head %>
    </head>
    <body>
        <div>
                        
            <h1><%=: element | toName %></h1>
            
            <section style="margin-top: .5em;">
                <span class="alert alert-info"><%= element.getClassName() %></span>
                <% if (element.stereotype) { %>
                    <span class="alert alert-info"><%-: element.stereotype | toValue %></span>
                <% } %>
            </section>

            <section style="margin-top: 10px">
                <% var terms = []; %>
                <% element.traverseUp(function (e) { terms.unshift(e); }); %>
                <% for (var i = 0, len = terms.length; i < len; i++) { %>
                    <% if (i > 0) { %><span>::</span><% } %>
                <span class="label label-info"><a href="<%=: terms[i] | toUrl %>"><%=: terms[i] | toName %></a></span>
                <% } %>
            </section>
            
            <% if (element instanceof type.Diagram) { %>
            <section>
                <h3>Diagram</h3>
                <img src="../../../html/diagrams/Main.svg">
            </section>
            <% } %>
            
            <% if (element instanceof type.ExtensibleModel) { %>
            <section>
                <h3>Description</h3>
                <div>
                    <% if (element.documentation.trim().length === 0) { %>
                        <span class="label label-info">none</span>
                    <% } else { %>
                        <%-: element.documentation | markdown %>
                    <% } %>
                </div>
            </section>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _generals = element.getGeneralElements(); %>
            <%   if (_generals.length > 0) { %>
            <section class="element-list">
                <h3>Generalized Elements</h3>
                <ul class="nav nav-list">
                    <% _generals.forEach(function (e) { %>
                    <li><a href="<%=: e | toUrl %>"><%=: e | toText %></a></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _specials = element.getSpecialElements(); %>
            <%   if (_specials.length > 0) { %>
            <section class="element-list">
                <h3>Specialized Elements</h3>
                <ul class="nav nav-list">
                    <% _specials.forEach(function (e) { %>
                    <li><a href="<%=: e | toUrl %>"><%=: e | toText %></a></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _reals = element.getRealizingInterfaces(); %>
            <%   if (_reals.length > 0) { %>
            <section class="element-list">
                <h3>Realizing Interfaces</h3>
                <ul class="nav nav-list">
                    <% _reals.forEach(function (e) { %>
                    <li><a href="<%=: e | toUrl %>"><%=: e | toText %></a></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLInterface) { %>
            <%   var _realizeds = element.getRealizedElements(); %>
            <%   if (_realizeds.length > 0) { %>
            <section class="element-list">
                <h3>Realized Elements</h3>
                <ul class="nav nav-list">
                    <% _realizeds.forEach(function (e) { %>
                    <li><a href="<%=: e | toUrl %>"><%=: e | toText %></a></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLModelElement && element.templateParameters && element.templateParameters.length > 0) { %>
            <section>
                <h3>Template Parameters</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <% element.templateParameters.forEach(function (param) { %>
                    <tr>
                        <td><%= param.visibility %></td>
                        <td><a href="<%=: param | toUrl %>"><%=: param | toName %></a></td>
                        <td><%-: param.parameterType | toValue %></td>
                        <td><%-: param.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>

            <% if (element instanceof type.UMLEnumeration && element.literals && element.literals.length > 0) { %>
            <section>
                <h3>Literals</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                    <% element.literals.forEach(function (literal) { %>
                    <tr>
                        <td><%= literal.visibility %></td>
                        <td><a href="<%=: literal | toUrl %>"><%=: literal | toName %></a></td>
                        <td><%-: literal.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>            
            
            <% if (element instanceof type.UMLClassifier && element.attributes && element.attributes.length > 0) { %>
            <section>
                <h3>Attributes</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <% element.attributes.forEach(function (attr) { %>
                    <tr>
                        <td><%= attr.visibility %></td>
                        <td><a href="<%=: attr | toUrl %>"><%=: attr | toName %></a></td>
                        <td><%-: attr.type | toType %></td>
                        <td><%-: attr.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>

            <% if (element instanceof type.UMLClassifier && element.operations && element.operations.length > 0) { %>
            <section>
                <h3>Operations</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                    <% element.operations.forEach(function (op) { %>
                    <tr>
                        <td><%= op.visibility %></td>
                        <td><a href="<%=: op | toUrl %>"><%=: op.getString({showOperationSignature: true, showType: true}) %></a></td>
                        <td><%-: op.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>
            
            <% if (element instanceof type.UMLBehavioralFeature && element.parameters && element.parameters.length > 0) { %>
            <section>
                <h3>Parameters</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Direction</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <% element.parameters.forEach(function (param) { %>
                    <tr>
                        <td><%= param.direction %></td>
                        <td><a href="<%=: param | toUrl %>"><%=: param | toName %></a></td>
                        <td><%-: param.type | toValue %></td>
                        <td><%-: param.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>
            
            <% var properties = element.getMetaAttributes(); %>
            <section>
                <h3>Properties</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Name</th>
                        <th>Value</th>
                    </tr>
                    <% properties.forEach(function (prop) { %>
                    <% if (prop.visible) { %>
                    <%   if (prop.kind === "objs" || prop.kind === "refs") { %>
                    <tr>
                        <td><%= prop.name %></td>
                        <td>
                            <% element[prop.name].forEach(function (e, idx) { %>
                            <% if (idx > 0) { %><span>, </span><% } %>
                            <%-: e | toValue %>
                            <% }); %>
                        </td>
                    </tr>
                    <%   } else { %>
                    <tr>
                        <td><%= prop.name %></td>
                        <td><%-: element[prop.name] | toValue %></td>
                    </tr>
                    <%   } %>
                    <% } %>
                    <% }); %>
                </table>
            </section>

            <% if (element instanceof type.Model && element.tags && element.tags.length > 0) { %>
            <section>
                <h3>Tags</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Name</th>
                        <th>Kind</th>
                        <th>Value</th>
                    </tr>
                    <% element.tags.forEach(function (tag) { %>
                    <tr>
                        <td><%= tag.name %></td>
                        <td><span class="label label-info"><%= tag.kind %></span></td>
                        <td>
                            <% if (tag.kind === mdj.Core.TK_BOOLEAN) { %>
                            <%-: tag.checked | toValue %>
                            <% } else if (tag.kind === mdj.Core.TK_REFERENCE) { %>
                            <%-: tag.reference | toValue %>
                            <% } else if (tag.kind === mdj.Core.TK_NUMBER) { %>
                            <%-: tag.number | toValue %>
                            <% } else { %>
                            <%-: tag.value | toValue %>
                            <% } %>
                        </td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>
            
            <% var _rels = mdj.Repository.getRelationshipsOf(element);  %>
            <% if (_rels.length > 0) { %>
            <section class="element-list">
                <h3>Relationships</h3>
                <ul class="nav nav-list">
                    <% _rels.forEach(function (e) { %>
                    <li><a href="<%=: e | toUrl %>"><%=: e | toText %></a></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>
            
            <% if (element.ownedElements && element.ownedElements.length > 0) { %>
            <section class="element-list">
                <h3>Owned Elements</h3>
                <ul class="nav nav-list">
                    <% element.ownedElements.forEach(function (e) { %>
                    <li><a href="<%=: e | toUrl %>"><%=: e | toText %></a></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>

        </div>        
    </body>    
</html>
