<!DOCTYPE html>
<html lang="en">
    <head>
        <title><%= element.name %></title>
        <% include head %>
    </head>
    <body>
        <div>
                        
            <h1><%=: element | toName %></h1>
            
            <section style="margin-top: .5em;">
                <span class="alert alert-info">
                    <span class="node-icon <%=: element | toIcon %>"></span>
                    <%= element.getClassName() %>
                </span>
                <% if (element.stereotype instanceof type.UMLStereotype) { %>
                    <span style="margin-left: 10px" class="alert alert-info"><%-: element.stereotype | toValue %></span>
                <% } else if (typeof element.stereotype === "string") { %>
                    <span style="margin-left: 10px" class="alert alert-info">«<%-: element.stereotype | toValue %>»</span>
                <% } %>
            </section>

            <section style="margin-top: 10px">
                <% var terms = []; %>
                <% element.traverseUp(function (e) { terms.unshift(e); }); %>
                <% for (var i = 0, len = terms.length; i < len; i++) { %>
                    <% if (i > 0) { %><span>::</span><% } %>
                    <span class="label label-info"><%-: terms[i] | toValue %></span>
                <% } %>
            </section>
            
            <% if (element instanceof type.Diagram) { %>
            <section>
                <h3>Diagram</h3>
                <img src="<%=: element | toDiagram %>">
            </section>
            <% } %>
            
            <% if (element instanceof type.ExtensibleModel) { %>
            <section>
                <h3>Description</h3>
                <div>
                    <% if (element.documentation.trim().length === 0) { %>
                        <span class="label label-info">none</span>
                    <% } else { %>
                        <%-: element.documentation | markdown %>
                    <% } %>
                </div>
            </section>
            <% } %>
            
            <% if ((element instanceof type.UMLConstraint || element instanceof type.UMLOperation) && (element.specification.length > 0)) { %>
            <section>
                <h3>Specification</h3>
                <pre><%= element.specification %></pre>
            </section>
            <% } %>
            
            <% if (element instanceof type.DirectedRelationship && element.source && element.target) { %>
            <section class="element-list">
                <table width="100%">
                    <tr>
                        <td width="50%">
                            <h3>Source</h3>
                            <ul class="nav nav-list">
                                <li><%-: element.source | toValue %></a></li>
                            </ul>
                        </td>
                        <td width="50%">
                            <h3>Target</h3>
                            <ul class="nav nav-list">
                                <li><%-: element.target | toValue %></a></li>
                            </ul>
                        </td>
                    </tr>
                </table>
            </section>
            <% } %>

            <% if (element instanceof type.UndirectedRelationship && element.end1 && element.end2) { %>
            <section class="element-list">
                <table width="100%">
                    <tr>
                        <td width="50%" style="padding-right: 1em">
                            <h3>End1</h3>
                            <% var elem = element.end1, properties = elem.getMetaAttributes(); %>
                            <% include properties %>                            
                        </td>
                        <td width="50%" style="padding-right: 1em">
                            <h3>End2</h3>
                            <% var elem = element.end2, properties = elem.getMetaAttributes(); %>
                            <% include properties %>                            
                        </td>
                    </tr>
                </table>
            </section>
            <% } %>
            
            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _generals = element.getGeneralElements(); %>
            <%   if (_generals.length > 0) { %>
            <section class="element-list">
                <h3>Generalized Elements</h3>
                <ul class="nav nav-list">
                    <% _generals.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _specials = element.getSpecialElements(); %>
            <%   if (_specials.length > 0) { %>
            <section class="element-list">
                <h3>Specialized Elements</h3>
                <ul class="nav nav-list">
                    <% _specials.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _reals = element.getInterfaces(); %>
            <%   if (_reals.length > 0) { %>
            <section class="element-list">
                <h3>Interfaces</h3>
                <ul class="nav nav-list">
                    <% _reals.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLInterface) { %>
            <%   var _impls = element.getImplementingClassifiers(); %>
            <%   if (_impls.length > 0) { %>
            <section class="element-list">
                <h3>Implementing Classifiers</h3>
                <ul class="nav nav-list">
                    <% _impls.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _comps = element.getComponents(); %>
            <%   if (_comps.length > 0) { %>
            <section class="element-list">
                <h3>Components</h3>
                <ul class="nav nav-list">
                    <% _comps.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLComponent) { %>
            <%   var _compreals = element.getRealizingClassifiers(); %>
            <%   if (_compreals.length > 0) { %>
            <section class="element-list">
                <h3>Realizing Classifiers</h3>
                <ul class="nav nav-list">
                    <% _compreals.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLClassifier) { %>
            <%   var _targets = element.getDeploymentTargets(); %>
            <%   if (_targets.length > 0) { %>
            <section class="element-list">
                <h3>Deployment Targets</h3>
                <ul class="nav nav-list">
                    <% _targets.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLNode) { %>
            <%   var _deployed = element.getDeployedElements(); %>
            <%   if (_deployed.length > 0) { %>
            <section class="element-list">
                <h3>Deployed Elements</h3>
                <ul class="nav nav-list">
                    <% _deployed.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLActor) { %>
            <%   var _usecases = element.getUseCases(); %>
            <%   if (_usecases.length > 0) { %>
            <section class="element-list">
                <h3>Use Cases</h3>
                <ul class="nav nav-list">
                    <% _usecases.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLUseCase) { %>
            <%   var _actors = element.getActors(); %>
            <%   if (_actors.length > 0) { %>
            <section class="element-list">
                <h3>Actors</h3>
                <ul class="nav nav-list">
                    <% _actors.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLUseCase) { %>
            <%   var _includeds = element.getIncludedUseCases(); %>
            <%   if (_includeds.length > 0) { %>
            <section class="element-list">
                <h3>Included Use Cases</h3>
                <ul class="nav nav-list">
                    <% _includeds.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLUseCase) { %>
            <%   var _extendings = element.getExtendingUseCases(); %>
            <%   if (_extendings.length > 0) { %>
            <section class="element-list">
                <h3>Extending Use Cases</h3>
                <ul class="nav nav-list">
                    <% _extendings.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLModelElement && element.templateParameters && element.templateParameters.length > 0) { %>
            <section>
                <h3>Template Parameters</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <% element.templateParameters.forEach(function (param) { %>
                    <tr>
                        <td><%= param.visibility %></td>
                        <td><a href="<%=: param | toUrl %>"><%=: param | toName %></a></td>
                        <td><%-: param.parameterType | toValue %></td>
                        <td><%-: param.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>

            <% if (element instanceof type.UMLEnumeration && element.literals && element.literals.length > 0) { %>
            <section>
                <h3>Literals</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                    <% element.literals.forEach(function (literal) { %>
                    <tr>
                        <td><%= literal.visibility %></td>
                        <td><a href="<%=: literal | toUrl %>"><%=: literal | toName %></a></td>
                        <td><%-: literal.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>            
            
            <% if (element instanceof type.UMLClassifier && element.attributes && element.attributes.length > 0) { %>
            <section>
                <h3>Attributes</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <% element.attributes.forEach(function (attr) { %>
                    <tr>
                        <td><%= attr.visibility %></td>
                        <td><a href="<%=: attr | toUrl %>"><%=: attr | toName %></a></td>
                        <td><%-: attr.type | toType %></td>
                        <td><%-: attr.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>

            <% if (element instanceof type.UMLClassifier && element.operations && element.operations.length > 0) { %>
            <section>
                <h3>Operations</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Visibility</th>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                    <% element.operations.forEach(function (op) { %>
                    <tr>
                        <td><%= op.visibility %></td>
                        <td><a href="<%=: op | toUrl %>"><%=: op.getString({showOperationSignature: true, showType: true}) %></a></td>
                        <td><%-: op.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>
            <% } %>

            <% if (element instanceof type.UMLUseCase && element.extensionPoints && element.extensionPoints.length > 0) { %>
            <section>
                <h3>Extension Points</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Name</th>
                        <th>Location</th>
                        <th>Description</th>
                    </tr>
                    <% element.extensionPoints.forEach(function (ep) { %>
                    <tr>
                        <td><a href="<%=: ep | toUrl %>"><%=: ep | toName %></a></td>
                        <td><%-: ep.location | toValue %></td>
                        <td><%-: ep.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>            
                        
            <% if (element instanceof type.UMLBehavioralFeature && element.parameters && element.parameters.length > 0) { %>
            <section>
                <h3>Parameters</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Direction</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <% element.parameters.forEach(function (param) { %>
                    <tr>
                        <td><%= param.direction %></td>
                        <td><a href="<%=: param | toUrl %>"><%=: param | toName %></a></td>
                        <td><%-: param.type | toValue %></td>
                        <td><%-: param.documentation | markdown %></td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>

            <%
            var _diagrams = [];
            if (element.ownedElements && element.ownedElements.length > 0) {
                element.ownedElements.forEach(function (e) {
                    if (e instanceof type.Diagram) { _diagrams.push(e); }
                });
            }
            %>
            <% if (_diagrams.length > 0) { %>
            <section class="element-list">
                <h3>Diagrams</h3>
                <div>
                    <% _diagrams.forEach(function (d) { %>
                    <div style="display: inline-block; width: 250px; vertical-align: top;">
                        <div class="member">
                            <a href="<%=: d | toUrl %>">
                            <img src="<%=: d | toDiagram %>">
                            <div style="text-align: center; margin-top: 1em;"><%-: d | toName %></div>
                            </a>
                        </div>
                    </div>
                    <% }); %>
                </div>
            </section>
            <% } %>            
                        
            <section>
                <h3>Properties</h3>
                <% var elem = element, properties = elem.getMetaAttributes(); %>
                <% include properties %>
            </section>

            <% if (element instanceof type.Model && element.tags && element.tags.length > 0) { %>
            <section>
                <h3>Tags</h3>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Name</th>
                        <th>Kind</th>
                        <th>Value</th>
                    </tr>
                    <% element.tags.forEach(function (tag) { %>
                    <tr>
                        <td><%= tag.name %></td>
                        <td><span class="label label-info"><%= tag.kind %></span></td>
                        <td>
                            <% if (tag.kind === mdj.Core.TK_BOOLEAN) { %>
                            <%-: tag.checked | toValue %>
                            <% } else if (tag.kind === mdj.Core.TK_REFERENCE) { %>
                            <%-: tag.reference | toValue %>
                            <% } else if (tag.kind === mdj.Core.TK_NUMBER) { %>
                            <%-: tag.number | toValue %>
                            <% } else { %>
                            <%-: tag.value | toValue %>
                            <% } %>
                        </td>
                    </tr>
                    <% }); %>
                </table>
            </section>            
            <% } %>

            <% if (element instanceof type.UMLModelElement) { %>
            <%   var _constraints = element.getConstraints(); %>
            <%   if (_constraints.length > 0) { %>
            <section class="element-list">
                <h3>Constraints</h3>
                <ul class="nav nav-list">
                    <% _constraints.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLBehavior && element.preconditions && element.preconditions.length > 0) { %>
            <section class="element-list">
                <h3>Preconditions</h3>
                <ul class="nav nav-list">
                    <% element.preconditions.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>

            <% if (element instanceof type.UMLBehavior && element.postconditions && element.postconditions.length > 0) { %>
            <section class="element-list">
                <h3>Postconditions</h3>
                <ul class="nav nav-list">
                    <% element.postconditions.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>

            <% if (element instanceof type.UMLAction && element.localPreconditions && element.localPreconditions.length > 0) { %>
            <section class="element-list">
                <h3>Local Preconditions</h3>
                <ul class="nav nav-list">
                    <% element.localPreconditions.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>

            <% if (element instanceof type.UMLAction && element.localPostconditions && element.localPostconditions.length > 0) { %>
            <section class="element-list">
                <h3>Local Postconditions</h3>
                <ul class="nav nav-list">
                    <% element.localPostconditions.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>

            <% if (element instanceof type.UMLInteraction) { %>
            <%   if (element.fragments && element.fragments.length > 0) { %>
            <section class="element-list">
                <h3>Fragments</h3>
                <ul class="nav nav-list">
                    <% element.fragments.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <%   if (element.participants && element.participants.length > 0) { %>
            <section class="element-list">
                <h3>Participants</h3>
                <ul class="nav nav-list">
                    <% element.participants.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <%   if (element.messages && element.messages.length > 0) { %>
            <section class="element-list">
                <h3>Messages</h3>
                <ul class="nav nav-list">
                    <% element.messages.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>

            <% if (element instanceof type.UMLModelElement) { %>
            <%   var _dependencies = element.getDependencies(); %>
            <%   if (_dependencies.length > 0) { %>
            <section class="element-list">
                <h3>Dependencies</h3>
                <ul class="nav nav-list">
                    <% _dependencies.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% if (element instanceof type.UMLModelElement) { %>
            <%   var _dependants = element.getDependants(); %>
            <%   if (_dependants.length > 0) { %>
            <section class="element-list">
                <h3>Dependants</h3>
                <ul class="nav nav-list">
                    <% _dependants.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <%   } %>
            <% } %>
            
            <% var _rels = mdj.Repository.getRelationshipsOf(element);  %>
            <% if (_rels.length > 0) { %>
            <section class="element-list">
                <h3>Relationships</h3>
                <ul class="nav nav-list">
                    <% _rels.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>
            
            <% if (element.ownedElements && element.ownedElements.length > 0) { %>
            <section class="element-list">
                <h3>Owned Elements</h3>
                <ul class="nav nav-list">
                    <% element.ownedElements.forEach(function (e) { %>
                    <li><%-: e | toValue %></li>
                    <% }); %>
                </ul>
            </section>
            <% } %>

        </div>        
    </body>    
</html>
